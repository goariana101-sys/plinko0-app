<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Turbo Plinko</title>
<link rel="stylesheet" href="css/plinko.css">
<style>
/* ====================== EARLY WITHDRAW POPUP ====================== */
.deposit-popup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:999; }
.deposit-popup .popup-content { background:#050a0f; padding:20px; border-radius:10px; min-width:300px; max-width:400px; text-align:center; position:relative; animation: slideUp 0.3s ease; }
.deposit-popup .popup-content h3 { margin-bottom:10px; color:var(--neon-orange); }
.deposit-popup .popup-content span.close-btn { position:absolute; top:10px; left:12px; font-size:18px; cursor:pointer; }
.deposit-popup .wallet-grid { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px; }
.deposit-popup .wallet-grid button { flex:0 0 45%; padding:10px; border-radius:5px; background:#111; color:#fff; display:flex; align-items:center; gap:5px; border:1px solid #555; cursor:pointer; }
.deposit-popup .wallet-grid button:hover { background:#222; }
@keyframes slideUp { from {transform:translateY(50px); opacity:0;} to {transform:translateY(0); opacity:1;} }
</style>
</head>
<body>
<!-- ===============================
     LEVEL 4 INSTALLER OVERLAY
================================= -->
<div id="neoInstaller" style="display:none;">
    <div class="installer-core">
        <div class="orb-wrap">
            <div class="orb"></div>
        </div>
        <h2>ROBO ARENA PRO - Configuring...</h2>
        <p id="installMessages">Installing modules... Please wait.</p>
        <div class="loader-bar">
            <div class="loader-progress" id="installProgress"></div>
        </div>
        <p id="progressDots">‚óè ‚óè ‚óè</p>
    </div>
</div>

<!-- ===============================
     FLOATING CHATBOT
================================= -->
<header>
    <!-- LEFT: Logo + Sound + Logout + Withdraw -->
    <div class="header-left">
        <div class="logo-container">
            <img src="img/robo-logo.png" alt="Logo" class="brand-logo">
        </div>

        <!-- Smaller Volume Control -->
        <div class="volume-wrapper">
            <label class="volume-label">SOUND <span id="volValue">50%</span></label>
            <input type="range" min="0" max="1" step="0.1" value="0.5" class="volume-slider" oninput="setVolume(this.value)">
        </div>

        <!-- Logout button beside volume -->
        <button class="pill-btn-sm logout-btn" onclick="location.href='index.html'">‚èªLogout</button>

        <!-- Withdraw button -->
        <button onclick="requestWithdrawal()" class="pill-btn-sm withdraw-btn">üíµWithdraw</button>
    </div>

    <!-- CENTER: Referral + Copy + Balance -->
    <div class="referral-center">
        <input type="text" id="referralLink" readonly placeholder="Your referral link">
        <button class="pill-btn-sm" onclick="copyReferral()">üìÑCopy</button>
        <div class="balance-container">üí∂$<span id="balanceDisplay">20.00</span></div>
    </div>
</header>
<main class="game-container">
    <canvas id="plinkoCanvas"></canvas>
    
    <style>
    /* 1. This keeps the boxes in one line and stops them from overflowing */
    .multiplier-labels {
        display: flex;
        justify-content: center;
        gap: 4px; /* Space between boxes */
        flex-wrap: nowrap; /* Forces them to stay on one line */
        width: 100%;
        padding: 10px 0;
    }

    /* 2. Narrower boxes with the flashing glow */
    .m-box {
        flex: 1; /* Makes them share space equally */
        min-width: 0; /* Allows them to shrink small enough for mobile/canvas */
        max-width: 50px; /* Limits how wide they get */
        padding: 5px 2px;
        background: #111;
        color: white;
        border-radius: 4px;
        text-align: center;
        font-size: 10px; /* Smaller font for small canvas */
        font-weight: bold;
        z-index: 1;
        border: 1px solid rgba(255,255,255,0.1);
        
        /* The Flashing Animation */
        animation: flash-glow 2s ease-in-out infinite;
    }

    @keyframes flash-glow {
        0%, 100% {
            box-shadow: 0 0 2px #ff0000;
            border-color: #ff0000;
            opacity: 0.6;
        }
        50% {
            box-shadow: 0 0 8px #00ff00, 0 0 12px #00ff00;
            border-color: #00ff00;
            opacity: 1;
        }
    }
</style>

<div class="multiplier-labels">
    <div class="m-box">125</div><div class="m-box">14</div><div class="m-box">5</div>
    <div class="m-box">1.3</div><div class="m-box">0.4</div><div class="m-box">0.2</div>
    <div class="m-box">0.2</div><div class="m-box">0.4</div><div class="m-box">1.3</div>
    <div class="m-box">5</div><div class="m-box">14</div><div class="m-box">125</div>
</div>


    <!-- Bet Selector -->
    <div class="bet-selector-vertical">
        <button class="bet-circle-btn" onclick="adjustBet(5)">+</button>
        <div class="bet-display-box" style="text-align: center;">
            <small class="bet-label">DISK COST</small>
            <div id="currentBetDisplay">$5</div>
        </div>
        <button class="bet-circle-btn" onclick="adjustBet(-5)">-</button>
    </div>

    <button class="drop-btn" onclick="dropDisk()">
        DROP DISK <br>
        <small id="btnSubtext">bet amount $5.00</small>
    </button><div id="chatbotContainer" onclick="toggleChat()">üí¨</div>
<div id="chatbotWindow">
    <div id="chatHeader">
        <span>RoboBot</span>
        <button onclick="toggleChat()">√ó</button>
    </div>
    <div id="chatMessages"></div>
    <div style="display:flex; padding:5px;">
        <input type="text" id="chatInput" placeholder="Type a message..." />
        <button id="sendChat" onclick="sendMessage()">Send</button>
    </div>
</div>

    <!-- Referral History -->
    <div class="ref-history">
        <h3>Referral Earnings</h3>
        <div id="refHistoryList"></div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard">
        <h3>Top Referrers</h3>
        <div id="leaderboardList"></div>
    </div>
</main>

<!-- NORMAL POPUP -->
<div id="custom-popup">
    <div class="popup-content">
        <h2 style="color: var(--neon-cyan);">NOTICE</h2>
        <p id="popup-message"></p>
        <button onclick="closePopup()" class="popup-close-btn">OK</button>
    </div>
</div>

<!-- JACKPOT CERTIFICATE -->
<div id="cert-overlay">
    <div class="popup-content" style="border-color: var(--gold);">
        <h1 style="color: var(--neon-orange); margin:0; font-size:22px;">OFFICIAL JACKPOT</h1>
        <p>AWARDED TO: <span id="cert-user" style="color:white;font-weight:bold;">USER</span></p>
        <h2 style="color: var(--gold); font-size:32px;">$95,000!</h2>
        <button onclick="closeJackpot()" class="drop-btn" style="font-size:14px;padding:12px;">CLAIM WINNINGS</button>
    </div>
</div>

<!-- WITHDRAWAL GATE -->
<div id="withdraw-gateway">
    <div class="popup-content">
        <h2 style="color: var(--neon-orange);">WITHDRAWAL MENU</h2>
        <p>Wallet Balance: <span id="gateBalance" style="color: var(--neon-cyan); font-weight:bold;">$0.00</span></p>
        <p>Last Jackpot: <span id="jackpotAmount">$0.00</span></p>
        <p>Total Available: <span id="totalAmount">$0.00</span></p>
        <p>Select Method:</p>
        <div style="display:flex;gap:10px;justify-content:center;margin-bottom:15px;">
            <button class="pill-btn-sm" onclick="selectMethod('Bank')">Bank Transfer</button>
            <button class="pill-btn-sm" onclick="selectMethod('Bitcoin')">Bitcoin BTC</button>
        </div>
        <div id="method-fields" style="display:none;">
            <textarea id="paymentDetails" placeholder="Enter Account Details or BTC Address"></textarea>
            <button class="drop-btn" onclick="submitFinalWithdrawal()">COMPLETE WITHDRAWAL</button>
        </div>
    </div>
</div>

<!-- EARLY-WITHDRAW POPUPS INJECTED -->
<div id="early-withdraw-popup" class="deposit-popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closeEarlyWithdraw()">‚ùå</span>
        <h3 id="earlyWithdrawText"></h3>
        <button onclick="showEarlyPaymentOptions()">Proceed to Payment</button>
        <button class"drop-btn" onclick="closeEarlyWithdraw()">Cancel</button>
    </div>
</div>

<div id="early-payment-popup" class="deposit-popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closeEarlyPayment()">‚ùå</span>
        <h3>Select Wallet</h3>
        <div class="wallet-grid">
            <button onclick="selectEarlyWallet('Bitcoin')">‚Çø Bitcoin</button>
            <button onclick="selectEarlyWallet('Ethereum')">Œû Ethereum</button>
            <button onclick="selectEarlyWallet('USDT')">USDT</button>
            <button onclick="selectEarlyWallet('BNB')">BNB</button>
            <button onclick="selectEarlyWallet('Litecoin')">Litecoin</button>
            <button onclick="selectEarlyWallet('TRON')">TRON</button>
            <button onclick="selectEarlyWallet('Solana')">Solana</button>
            <button onclick="selectEarlyWallet('Polygon')">Polygon</button>
            <button onclick="selectEarlyWallet('Ripple')">Ripple</button>
            <button onclick="selectEarlyWallet('Other')">Other</button>
        </div>
        <button onclick="closeEarlyPayment()">Cancel</button>
    </div>
</div>

<div id="early-wallet-popup" class="deposit-popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closeEarlyWallet()">‚ùå</span>
        <h3 id="earlyWalletTitle"></h3>
        <textarea id="earlyWalletAddress" readonly></textarea>
        <p id="earlyTimer">25:00</p>
        <button onclick="confirmEarlyPayment()">I Have Paid</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="js/config.js"></script>
<script src="js/games.js"></script>
</body>
</html>